var Utilities=function(t){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var e=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o="object"===("undefined"==typeof window?"undefined":n(window));function i(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}var a={width:o?window.innerWidth:1e3,height:o?window.innerHeight:1e3},c=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x1:t.x*(1-n),y1:t.y*(1-n),x2:(t.x+t.width)*(1+n),y2:(t.y+t.height)*(1+n)}},u=function(t,n){return!(t.x1>=n.x2||n.x1>=t.x2)&&!(t.y1>=n.y2||n.y1>=t.y2)},y=function(t,n){n.x,t.x;return[{x:t.x+t.width,y:t.y+t.height/2},{x:n.x+10,y:n.y+n.height/2}]},f=function(t,n){var e=c(n),r=e.x1,o=e.y1,i=e.x2,a=e.y2;return r<=t.x&&t.x<=i&&o<=t.y&&t.y<=a},l=Object.freeze({__proto__:null,nodeToArea:c,areaToNode:function(t){return{x:t.x1,y:t.y1,width:Math.abs(t.x2-t.x1),height:Math.abs(t.y2-t.y1)}},areaContains:function(t,n){return!(n.x1<t.x1||n.y1<t.y1||n.x2>t.x2||n.y2>t.y2)},areaOverlaps:u,generateLinkHandles:y,areaNodeIntersections:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n.filter((function(n){return u(c(t),c(n,e))})).map((function(t){return t.id}))},pointNodeIntersections:function(t,n){return n.filter((function(n){return f(t,n)})).map((function(t){return t.id}))},pointWithinNode:f,generateAreaFromNodes:function(t){var n={},e=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var u=i.value,y=c(u);(!n.x1||y.x1<n.x1)&&(n.x1=y.x1),(!n.y1||y.y1<n.y1)&&(n.y1=y.y1),(!n.x2||y.x2>n.x2)&&(n.x2=y.x2),(!n.y2||y.y2>n.y2)&&(n.y2=y.y2)}}catch(t){r=!0,o=t}finally{try{e||null==a.return||a.return()}finally{if(r)throw o}}return n},generateNode:function(t,n){var e=t.x>n.x,r=t.y>n.y,o=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y);return{x:e?t.x-o:t.x,y:r?t.y-i:t.y,width:o,height:i}},transformNodeSelection:function(t,n){var e={},r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var u=a.value;(!e.x||u.x<e.x)&&(e.x=u.x),(!e.y||u.y<e.y)&&(e.y=u.y)}}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t.map((function(t){var r=t.x-e.x,o=t.y-e.y;return Object.assign({},t,{x:n.x+r,y:n.y+o})}))}}),x=function(t,n){return Math.hypot(n.x-t.x,n.y-t.y)},d=function(t,n,e){return t*(1-e)+n*e},h=function(t,n,e,r,o){return(t-n)*(o-r)/(e-n)+r},s=Object.freeze({__proto__:null,distance:x,lerp:d,lerpPoint:function(t,n,e){return r={x:d(t.x,n.x,e)},o="x",i=d(t.y,n.y,e),o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r;var r,o,i},mapRange:h,angleBetween:function(t,n){return Math.atan2(n.y-t.y,n.x-t.x)}}),v=Object.freeze({__proto__:null,drawLinkBezierCurve:function(t,n,r,o){var i=e(y(n,r),2),c=i[0],u=i[1],f=h(x(c,u),0,a.width,.01*o,2*o);t.beginPath(),t.moveTo(c.x,c.y),t.bezierCurveTo(c.x*(1+f),c.y,u.x*(1-f),u.y,u.x,u.y)},drawArrowHead:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=y(n,r),a=e(i,2),c=a[0],u=a[1],f=angleBetween(c,u);t.setLineDash([0,0]),t.setTransform(1,0,0,1,u.x-o,u.y),t.rotate(.65*f),t.moveTo(-o,-o/1.25),t.lineTo(0,0),t.lineTo(-o,o/1.25),t.setTransform(1,0,0,1,0,0)},clear:function(t,n,e){t.clearRect(0,0,n,e)}}),p=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],m=Object.freeze({__proto__:null,getInteractionPoint:function(t,n){var e=t.getBoundingClientRect();return{x:parseInt((n.clientX-e.left)/(e.right-e.left)*t.offsetWidth),y:parseInt((n.clientY-e.top)/(e.bottom-e.top)*t.offsetHeight)}},matchesSelectorToParentElements:function(t,n,e){var r=t,o=p.find((function(t){return i(r[t])}));if(!i(r[o]))return!1;do{if(r[o](n))return!0;if(r===e)return!1;r=r.parentNode}while(r);return!1},addEvent:function(t,n,e){t&&(t.attachEvent?t.attachEvent("on"+n,e):t.addEventListener?t.addEventListener(n,e,!0):t["on"+n]=e)},removeEvent:function(t,n,e){t&&(t.detachEvent?t.detachEvent("on"+n,e):t.removeEventListener?t.removeEventListener(n,e,!0):t["on"+n]=null)}}),b=Object.freeze({__proto__:null,generateBezierCurve:function(t,n,r){if(t&&n){var o=e(y(t,n),2),i=o[0],c=o[1],u=h(x(i,c),0,a.width,.01*r,2*r);return"M".concat(i.x,",").concat(i.y," C").concat(i.x*(1+u),",").concat(i.y," ").concat(c.x*(1-u),",").concat(c.y," ").concat(c.x,",").concat(c.y)}},makeBezier:function(t,n,e){var r=h(x(t,n),0,a.width,.01*e,2*e);return"M".concat(t.x,",").concat(t.y," C").concat(t.x*(1+r),",").concat(t.y," ").concat(n.x*(1-r),",").concat(n.y," ").concat(n.x,",").concat(n.y)}});return t.canvas=v,t.dom=m,t.domWindow=a,t.groupBy=function(t){return function(n){return n.reduce((function(n,e){var r=e[t];return n[r]=(n[r]||[]).concat(e),n}),{})}},t.isClient=o,t.isFunction=i,t.nodes=l,t.number=s,t.pluralize=function(t,n,e){var r=t.length,o=e||"".concat(n,"s");return"".concat(r>0?r:"No"," ").concat(r>1?o:n)},t.shallowRemoveFromArray=function(t,n){var e=r(t),o=t.indexOf(n);return o>-1&&e.splice(o,1),e},t.shallowUnique=function(t,n,e){return e.indexOf(t)===n},t.svg=b,t}({});